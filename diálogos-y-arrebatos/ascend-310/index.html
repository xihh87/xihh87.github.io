<!doctype html><html lang=es-mx><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>[MindSpore] Ascend 310 Reasoning | Implementation Steps</title>
<link rel=stylesheet media=screen href=https://joshua.haase.mx/css/theme.min.2ee1317322f9eb9b2ef0a618d19b20e38c11f5f9c310751400a45db225dd2626.css integrity="sha256-LuExcyL565su8KYY0Zsg44wR9fnDEHUUAKRdsiXdJiY="><script src=https://hypothes.is/embed.js></script></head><body><main><article><h1>[MindSpore] Ascend 310 Reasoning | Implementation Steps</h1><nav id=TableOfContents><ul><li><a href=#overall-process>Overall process</a></li><li><a href=#related-scripts>Related scripts</a></li><li><a href=#export>Export</a></li></ul></nav><p><figure><img src=https://csdnimg.cn/release/blogv2/dist/pc/img/original.png></figure></p><p><a href='https://blog-csdn-net.translate.goog/weixin_41008021?_x_tr_sl=auto&_x_tr_tl=en&_x_tr_hl=en&_x_tr_pto=wapp' target=_blank rel=noopener>bravozyz</a><figure><img src=https://csdnimg.cn/release/blogv2/dist/pc/img/newCurrentTime2.png></figure>Posted at 2021-09-24 17:46:14<figure><img src=https://csdnimg.cn/release/blogv2/dist/pc/img/articleReadEyes2.png></figure>424<figure><img src=https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollect2.png></figure><figure><img src=https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollectionActive2.png></figure>Favorite 3</p><p>Copyright statement:
This article is an original article by the blogger and follows the <a href='https://translate.google.com/website?sl=auto&amp;tl=en&amp;hl=en&amp;client=webapp&amp;u=http://creativecommons.org/licenses/by-sa/4.0/' target=_blank rel=noopener>CC 4.0 BY-SA</a> copyright agreement.
Please attach the original source link and this statement for reprinting.</p><p>Link to this article:
<a href='120361998?_x_tr_sl=auto&_x_tr_tl=en&_x_tr_hl=en&_x_tr_pto=wapp'>https://blog.csdn.net/weixin_41008021/article/details/120361998</a></p><p>copyright</p><p><a href='https://blog-csdn-net.translate.goog/weixin_41008021/category_11043396.html?_x_tr_sl=auto&_x_tr_tl=en&_x_tr_hl=en&_x_tr_pto=wapp' title="Deep learning framework experience accumulation" target=_blank rel=noopener><figure><img src='https://img-blog.csdnimg.cn/20201014180756757.png?x-oss-process=image/resize,m_fixed,h_64,w_64'></figure>Deep learning framework experience accumulation The column contains this
content</a></p><p>10 articles 0 subscriptions</p><p>Subscribe to the column</p><p><figure><img src=#ZgotmplZ></figure></p><p>Introduction: This article introduces the process of inferring the network
implemented by the MindSpore framework on the Ascend 310 platform.
Taking CV Semantic Segmentation Network (HRNet) as an example,
the dataset used is Cityscapes,
and the data file is PNG image.
The intermediate primitive used is <strong>MindIR</strong>
and the data format is <strong>binary stream</strong>.</p><p>Suggestion:
You can refer to the 310 inference script of the ResNet series network
under the MindSpore ModelZoo master branch,
which is a good complete example.</p><p>Note: This article currently only introduces 310 inference based on MindIR and binary flow files,
and other methods will be updated accordingly.
Only the actual operation process is involved,
please refer to other materials for the specific principle.</p><h2 id=overall-process><a href=#overall-process alt>Overall process</a> <a href=# alt="Regresar al inicio">↑</a></h2><p><figure><img src='https://img-blog.csdnimg.cn/a264503aead94c31be1c098995b08927.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAYnJhdm96eXo=,size_11,color_FFFFFF,t_70,g_se,x_16'><figcaption>insert image description here</figcaption></figure></p><h2 id=related-scripts><a href=#related-scripts alt>Related scripts</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>The reasoning process involves the following related scripts:</p><ul><li><code>export.py</code></li><li><code>preprocess.py</code></li><li><code>main.cc</code></li><li><code>postprocess.py</code></li></ul><p>Next, the function of each script is introduced separately.</p><h2 id=export><a href=#export alt>Export</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>The work of this step is to convert the trained checkpoint file and
network model to MindIR.</p><p>Related scripts:<code>export.py</code></p><p>Input: checkpoint file</p><p>Output (*.mindir) location:<code>自定义</code></p><pre tabindex=0><code class=language-prism data-lang=prism>def main():
    &#34;&#34;&#34;Export mindir for 310 inference.&#34;&#34;&#34;
    parser = argparse.ArgumentParser(&#34;HRNet Semantic Segmentation exporting.&#34;)
    parser.add_argument(&#34;--device_id&#34;, type=int, default=0, help=&#34;Device ID. &#34;)
    parser.add_argument(&#34;--checkpoint_file&#34;, type=str, help=&#34;Checkpoint file path. &#34;)
    parser.add_argument(&#34;--file_name&#34;, type=str, help=&#34;Output file name. &#34;)
    parser.add_argument(&#34;--file_format&#34;, type=str, default=&#34;MINDIR&#34;,
                        choices=[&#34;AIR&#34;, &#34;MINDIR&#34;], help=&#34;Output file format. &#34;)
    parser.add_argument(&#34;--device_target&#34;, type=str, default=&#34;Ascend&#34;,
                        choices=[&#34;Ascend&#34;, &#34;GPU&#34;, &#34;CPU&#34;]
</code></pre></article></main></body></html>