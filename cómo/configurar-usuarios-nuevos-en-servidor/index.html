<!doctype html><html lang=es-mx><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Administrar usuarios</title>
<link rel=stylesheet media=screen href=https://joshua.haase.mx/css/theme.min.2ee1317322f9eb9b2ef0a618d19b20e38c11f5f9c310751400a45db225dd2626.css integrity="sha256-LuExcyL565su8KYY0Zsg44wR9fnDEHUUAKRdsiXdJiY="><script src=https://hypothes.is/embed.js></script></head><body><main><article><h1>Administrar usuarios</h1><nav id=TableOfContents><ul><li><a href=#reestablecer-la-contraseña-de-los-usuarios>Reestablecer la contraseña de los usuarios</a></li></ul></nav><ol><li><p>Cambiar al directorio de infraestructura.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cr o/g
</span></span></code></pre></div></li><li><p>Agregar el usuario a la configuración,
en la sección <code>student_users</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ansible-vault edit inventory.yml
</span></span></code></pre></div><pre tabindex=0><code>  - user: &#34;&#34;
    name: &#34;&#34;
    group: &#34;&#34;
    groups: &#34;&#34;
    key: &#34;&#34;
    state: present
    force_password_change: false
</code></pre></li><li><p>Agregar la clave pública si existe en <code>ssh_keys</code>.</p></li><li><p>Generar el nuevo usuario en la configuración.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>. .venv/bin/activate
</span></span><span style=display:flex><span>ansible-playbook playbooks/sirio-users.yml
</span></span></code></pre></div></li></ol><h2 id=reestablecer-la-contraseña-de-los-usuarios><a href=#reestablecer-la-contrase%c3%b1a-de-los-usuarios alt>Reestablecer la contraseña de los usuarios</a> <a href=# alt="Regresar al inicio">↑</a></h2><ol><li><p>Activar el cambio de contraseña para el usuario:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cr o/g
</span></span><span style=display:flex><span>ansible-vault edit inventory.yml
</span></span></code></pre></div><pre tabindex=0><code>  - user: &#34;&#34;
    name: &#34;&#34;
    group: &#34;&#34;
    groups: &#34;&#34;
    key: &#34;&#34;
    state: present
    force_password_change: true
</code></pre></li><li><p>Ejecutar el script:</p><pre tabindex=0><code>ansible-playbook playbooks/sirio-users.yml
</code></pre></li></ol></article></main></body></html>