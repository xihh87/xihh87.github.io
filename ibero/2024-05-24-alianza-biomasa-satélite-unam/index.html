<!doctype html><html lang=es-mx><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Plan de trabajo para «Evaluación de técnicas de aprendizaje profundo con información de teledetección a partir de fuentes abiertas para monitorear biomasa en bosques tropicales de México.»</title>
<link rel=stylesheet media=screen href=https://joshua.haase.mx/css/theme.min.2ee1317322f9eb9b2ef0a618d19b20e38c11f5f9c310751400a45db225dd2626.css integrity="sha256-LuExcyL565su8KYY0Zsg44wR9fnDEHUUAKRdsiXdJiY="><script src=https://hypothes.is/embed.js></script></head><body><main><article><h1>Plan de trabajo para «Evaluación de técnicas de aprendizaje profundo con información de teledetección a partir de fuentes abiertas para monitorear biomasa en bosques tropicales de México.»</h1><nav id=TableOfContents><ul><li><a href=#descripción-de-los-datos-que-hemos-usado>Descripción de los datos que hemos usado</a></li><li><a href=#generar-conjuntos-de-datos-para-entrenamientos-y-validación>Generar conjuntos de datos para entrenamientos y validación</a></li><li><a href=#entrenamiento-y-posible-optimización-para-hardware-huawei>Entrenamiento y posible optimización para hardware Huawei</a></li><li><a href=#burocracia-a-entregar>Burocracia a entregar</a></li><li><a href=#decisiones>Decisiones:</a></li><li><a href=#bitácora>Bitácora</a><ul><li><a href=#2024-06-18>2024-06-18</a></li><li><a href=#2024-06-20>2024-06-20</a></li><li><a href=#2024-06-21>2024-06-21</a></li><li><a href=#2024-06-24>2024-06-24</a></li><li><a href=#2024-06-25>2024-06-25</a></li></ul></li></ul></nav><p><a href='https://iberomx-my.sharepoint.com/:w:/r/personal/joshua_haase_ibero_mx/Documents/Proyectos/2024-alianza-unam/Alianza_2023_-_Biomasa_segmentaci%C3%B3n_sat%C3%A9lite.docx?d=w3da45ceb49934f42aaf620bbd7505ce0&amp;csf=1&amp;web=1&amp;e=cJhg9h' target=_blank rel=noopener>Protocolo</a>.</p><p><a href='https://iberomx-my.sharepoint.com/:f:/r/personal/joshua_haase_ibero_mx/Documents/Investigaci%C3%B3n/2024-alianza-unam?csf=1&amp;web=1&amp;e=Uisenf' target=_blank rel=noopener>Directorio del proyecto</a>.</p><p><a href=https://www.zotero.org/groups/5544671/biomasa-alianza target=_blank rel=noopener>Zotero</a>.</p><p>Dudas al correo: <a href=mailto:emergentes.tic@unam.mx>emergentes.tic@unam.mx</a></p><h2 id=descripción-de-los-datos-que-hemos-usado><a href=#descripci%c3%b3n-de-los-datos-que-hemos-usado alt>Descripción de los datos que hemos usado</a> <a href=# alt="Regresar al inicio">↑</a></h2><ul><li><input checked disabled type=checkbox> Concentrar los datos de biomasa y coordenadas para descargar las imágenes que usaremos para el entrenamiento.<ul><li>(Beto) Pide acceso a la información.<ul><li>&ldquo;Las otras tendríamos que escribir correos a los grupos de investigación y suma 200 más.&rdquo;</li></ul></li><li>(Candelario) Datos con información de las parcelas (2024-06-04).</li><li>(Jonathan) podría obtener imágenes de planet, sentinel jugar con probar mosaico.</li><li>¿Cuántos datos tenemos que podemos compartir ahora? (IMPIS/INFIS).</li><li><input checked disabled type=checkbox> (Cando) Quitando datos de Jorge, Miguel. Círculos de 113 metros, hay más de 100. 1600m^2 y coordenadas del centro.<ul><li><a href='https://iberomx-my.sharepoint.com/:x:/r/personal/joshua_haase_ibero_mx/Documents/Investigaci%C3%B3n/2024-alianza-unam/Base_Parcelas/Base_Parcelas_Alianza.xlsx?d=w8470a1daf2884eafb4bc527f7184bfd0&amp;csf=1&amp;web=1&amp;e=Gb0BPn' target=_blank rel=noopener>Conjunto de datos</a></li><li><a href='https://iberomx-my.sharepoint.com/:i:/r/personal/joshua_haase_ibero_mx/Documents/Investigaci%C3%B3n/2024-alianza-unam/Mapas%20JPG/Parcelas_INFYS_Alianza.jpg?csf=1&amp;web=1&amp;e=21iqC7' target=_blank rel=noopener>Imágen</a></li></ul></li><li><a href=https://snmf.cnf.gob.mx/documentos-metodologicos/ target=_blank rel=noopener>Método de muestreo del Inventario Nacional Forestal y de Suelos (INFyS)</a>.</li><li>25x25, 25x50, 40–50 (1000+).</li><li><a href='https://iberomx-my.sharepoint.com/:x:/r/personal/joshua_haase_ibero_mx/Documents/Investigaci%C3%B3n/2024-alianza-unam/Base_Parcelas/Base_Parcelas_Alianza.xlsx?d=w8470a1daf2884eafb4bc527f7184bfd0&amp;csf=1&amp;web=1&amp;e=Gb0BPn' target=_blank rel=noopener>Parcelas de bosques tropicales</a>.<ul><li>Las coordenadas están en las columnas <code>Northing_Geo</code> e <code>Easting_Geo</code>,
la biomasa está en <code>Biomasa (t/ha)</code>
y la fecha en <code>Ano_muestreo</code>.</li></ul></li></ul></li></ul><h2 id=generar-conjuntos-de-datos-para-entrenamientos-y-validación><a href=#generar-conjuntos-de-datos-para-entrenamientos-y-validaci%c3%b3n alt>Generar conjuntos de datos para entrenamientos y validación</a> <a href=# alt="Regresar al inicio">↑</a></h2><ul><li><input checked disabled type=checkbox> (Joshua) Descargar el conjunto de datos con el que se entrenó
<a href=https://github.com/priamus-lab/ReUse target=_blank rel=noopener>ReUNET</a>:
<a href=https://data.ceda.ac.uk/neodc/esacci/biomass/data/agb/maps/v3.0/ target=_blank rel=noopener>«ESA Biomass Climate Change Initiative of the Global above-ground forest biomass for 2018, v3»</a>
(<a href=https://catalogue.ceda.ac.uk/uuid/5f331c418e9f4935b8eb1b836f8a91b8 target=_blank rel=noopener>desc</a>,
vía <a href=https://climate.esa.int/en/data/#/ target=_blank rel=noopener>ESA</a>).</li><li><input checked disabled type=checkbox> (Joshua) Configurar acceso para las personas que quieran trabajar en el servidor.<ul><li><input checked disabled type=checkbox> (Jonathan,Max,Cando) Generar clave SSH.</li><li><input checked disabled type=checkbox> (Joshua) Agregarla al equipo.</li></ul></li><li><input checked disabled type=checkbox> (Joshua) Ayuda a montar GDrive en el servidor para copiar los datos.</li><li><input disabled type=checkbox> (Cando) Descargar imágenes satelitales desde Google Earth Engine.<ul><li>Imágenes multiespectrales de 10m desde 2015.
Son <strong>Mosaicos anuales de planet a 5m desde 2015</strong>.<ul><li><input disabled type=checkbox> 2015</li><li><input checked disabled type=checkbox> 2016</li><li><input disabled type=checkbox> 2017</li><li><input disabled type=checkbox> 2018</li><li><input disabled type=checkbox> 2019</li><li><input disabled type=checkbox> 2020</li><li><input disabled type=checkbox> 2021</li><li><input disabled type=checkbox> 2022</li><li><input disabled type=checkbox> 2023</li></ul></li></ul></li><li><input disabled type=checkbox> Subir las imágenes satelitales para entrenamiento al servidor.<ul><li>(Joshua) Descargar imágenes.</li></ul></li><li><input disabled type=checkbox> (Jonathan) Generó script para extraer imágenes TIF que incluyan los 40x40m (1600m²) centradas en las coordenadas de la base de datos.</li></ul><h2 id=entrenamiento-y-posible-optimización-para-hardware-huawei><a href=#entrenamiento-y-posible-optimizaci%c3%b3n-para-hardware-huawei alt>Entrenamiento y posible optimización para hardware Huawei</a> <a href=# alt="Regresar al inicio">↑</a></h2><ul><li><input checked disabled type=checkbox> (Joshua) Descargar código de Re-UNET.</li><li><input checked disabled type=checkbox> (Joshua) Leer <a href=https://proceedings.mlr.press/v212/lu23a/lu23a.pdf target=_blank rel=noopener>artículo original de Re-UNet</a>.
Al parecer para <a href=https://stackoverflow.com/questions/74954805/using-the-u-net-for-regression-problems target=_blank rel=noopener>cambiar de UNET segmentador a regresión Lineal</a>
basta con cambiar la función de pérdida por minimizar error cuadrado
y la última capa por una convolución con activación lineal.</li><li><input disabled type=checkbox> (Joshua) Generar contenedor para ejecutar el código.</li><li><input disabled type=checkbox> Entrenar modelo.</li><li><input disabled type=checkbox> Comparar con otros métodos.<ul><li>(Edgar) Tiene modelos en su equipo que podrían usarse para comparar rendimiento con otros modelos.</li></ul></li></ul><h2 id=burocracia-a-entregar><a href=#burocracia-a-entregar alt>Burocracia a entregar</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Este es el <a href='https://iberomx-my.sharepoint.com/:w:/r/personal/joshua_haase_ibero_mx/Documents/Investigaci%C3%B3n/2024-alianza-unam/01-recursos/Alianza_FormatoReportesTrimestrales_2023.docx?d=wcca28a9c34534aa2b0d43693c1c216a6&amp;csf=1&amp;web=1&amp;e=ZDbkF7' target=_blank rel=noopener>Documento de Reporte Trimestral</a></p><ul><li><input disabled type=checkbox> <a href='https://iberomx-my.sharepoint.com/:w:/r/personal/joshua_haase_ibero_mx/Documents/Investigaci%C3%B3n/2024-alianza-unam/99-entregables/2023%20-%2029%20-%201er%20reporte%20-%202024-08-09.docx?d=w88b2d36726e2489b8869e859b6b9d5de&amp;csf=1&amp;web=1&amp;e=fbQMNG' target=_blank rel=noopener>Reporte 2024-08-09</a>.</li><li><input disabled type=checkbox> <a href='https://iberomx-my.sharepoint.com/:w:/r/personal/joshua_haase_ibero_mx/Documents/Investigaci%C3%B3n/2024-alianza-unam/99-entregables/2023%20-%2029%20-%202o%20reporte%20-%202024-11-08.docx?d=w422feb35ca8d43e2a9f06e8e9c5d7488&amp;csf=1&amp;web=1&amp;e=dkIMwf' target=_blank rel=noopener>Reporte 2024-11-08</a>.</li><li><input disabled type=checkbox> <a href='https://iberomx-my.sharepoint.com/:w:/r/personal/joshua_haase_ibero_mx/Documents/Investigaci%C3%B3n/2024-alianza-unam/99-entregables/2023%20-%2029%20-%203er%20reporte%20-%202025-02-07.docx?d=wd1970312c7904d8da4a842bd0b92b105&amp;csf=1&amp;web=1&amp;e=rBUBf1' target=_blank rel=noopener>Reporte 2025-02-07</a>.</li><li><input disabled type=checkbox> <a href='https://iberomx-my.sharepoint.com/:w:/r/personal/joshua_haase_ibero_mx/Documents/Investigaci%C3%B3n/2024-alianza-unam/99-entregables/2023%20-%2029%20-%204o%20reporte%20-%202025-05-09.docx?d=wd56d3225f402494ebf6f6492f82ffff4&amp;csf=1&amp;web=1&amp;e=e6cAJt' target=_blank rel=noopener>Informe final 2025-05-09</a>.</li><li><input disabled type=checkbox> Escribir reporte.</li><li><input disabled type=checkbox> Escribir artículo.</li></ul><p>Base de datos de parcelas, dónde están, cuándo se tomaron, criterios de medición.
Datos de individuos.</p><h2 id=decisiones><a href=#decisiones alt>Decisiones:</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Tamaño de corte alrededor de la parcela.</p><p>10m sólo 4
20m
60m IR</p><p>Si se van a hacer compuestos.</p><p>Lo mejor es tomar las bandas completas.</p><p>Tal vez quieran probar con índices.</p><p>Discutir.</p><p>Podría usarse únicamente infis.</p><p>Está por años y la mayoría está sólo el año,
si van a ser compuestos anuales.</p><hr><p>Métodos de composición de mosaico usando mediana.</p><hr><p>Artículo con ventanas de diferentes tamaños
porque teníamos diferentes muestreos.</p><p>Al menos sacar 3 recortes, tal vez 10.
Tal vez hacer por escalas.</p><p>A lo mejor podemos hacer un análisis multi-escala.
No hay muchos artículos.</p><hr><p>Valdría la pena buscar bibliografía de análisis de multi-escala.</p><p>¿Qué atributos con métrica de textura se modelan mejor y a qué escala?</p><p>¿Qué tamaño de ventana de modelación es mejor para modelar?</p><p>En vez de hacer el corte a mano, usando un método automatizado.</p><h2 id=bitácora><a href=#bit%c3%a1cora alt>Bitácora</a> <a href=# alt="Regresar al inicio">↑</a></h2><h3 id=2024-06-18><a href=#2024-06-18 alt>2024-06-18</a> <a href=# alt="Regresar al inicio">↑</a></h3><ul><li><p>Se intentó instalar las bibliotecas requeridas por el modelo.</p><p>Se encontró que las bibliotecas estaban planeada para windows y no todas funcionan.</p><p>Se intentó cambiar las restricciones para instalar las dependencias.</p><p>Se usó &ldquo;miniconda3&rdquo; como contenedor para generar el entorno:</p><pre tabindex=0><code>$ docker run -ti --rm -v $(realpath ReUse):/reunet -u 1021 conda/miniconda
# modificar el archivo para eliminar dependencias no resolubles
# y eliminar las versiones específicas de los modelos
(docker) $ export HOME=/unet
(docker) $ conda env create -n reunet --file environment.yml
</code></pre><p>Respondieron que &ldquo;podemos instalar cualquier docker&rdquo;,
pero es una mentira porque no podemos usar los NPU.</p></li></ul><h3 id=2024-06-20><a href=#2024-06-20 alt>2024-06-20</a> <a href=# alt="Regresar al inicio">↑</a></h3><ul><li><p>Se usó el contenedor <code>condaforge/miniforge3</code> porque <code>conda/miniconda3</code> no permite instalar <code>libgl</code></p><p>Eso permitió instalar todas las dependencias
y ejecutar el sistema al punto de que faltan las imágenes.</p><p>Eso me permite explorar la biblioteca de descarga para
averiguar si se pueden descargar los pesos de un modelo pre-entrenado.</p><p>Para corregir el error <code>ImportError: libGL.so.1: cannot open shared object file: No such file or directory</code> en <code>conda</code>, se usó el <a href=https://hub.docker.com/r/condaforge/miniforge3/tags target=_blank rel=noopener>docker <code>condaforge/miniforge3:24.3.0-0</code></a> y se instalaron estas dependencias (<a href=https://stackoverflow.com/a/63377623/10467443 target=_blank rel=noopener>SO</a>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>apt-get update <span style=color:#f92672>&amp;&amp;</span> apt-get install ffmpeg libsm6 libxext6  -y
</span></span></code></pre></div><p>El contenedor <code>conda/miniconda3</code> no puede instalar estas dependencias porque no puede actualizar.</p><p>Instalé <a href=https://pypi.org/project/tensorflow-ascend/ target=_blank rel=noopener><code>tensorflow-ascend</code></a> pero no sé si eso ayude a ejecutar el entrenamiento o no.</p></li></ul><h3 id=2024-06-21><a href=#2024-06-21 alt>2024-06-21</a> <a href=# alt="Regresar al inicio">↑</a></h3><p>Pretendo buscar el código que generaría el modelo o lo entrenaría.
Si no puedo encontrarlo en el repositorio,
será momento de buscar los papers y programarlo desde cero a partir de la descripción.</p><h3 id=2024-06-24><a href=#2024-06-24 alt>2024-06-24</a> <a href=# alt="Regresar al inicio">↑</a></h3><p>Encontré la <a href=https://ascendhub.huawei.com/#/detail/ascend-pytorch-x86 target=_blank rel=noopener>Guía de Ascend pytorch</a>
para instalar pytorch que se requiere para
<a href=https://github.com/MIC-DKFZ/nnUNet/blob/master/documentation/installation_instructions.md target=_blank rel=noopener>nnUNet</a>
(<a href=https://arxiv.org/pdf/1904.08128 target=_blank rel=noopener>paper</a>)
y descargué el <a href=https://admin.climate.esa.int/de/projekte/biomasse/#_data-tab target=_blank rel=noopener>conjunto de datos de biomasa</a> en sirio</p><h3 id=2024-06-25><a href=#2024-06-25 alt>2024-06-25</a> <a href=# alt="Regresar al inicio">↑</a></h3><p>Encontré las siguientes implementaciones de UNET en mindspore:</p><ul><li><a href=https://github.com/MatthewQi2002/Unet_mindspore target=_blank rel=noopener>https://github.com/MatthewQi2002/Unet_mindspore</a></li><li><a href=https://www.mindspore.cn/mindflow/docs/en/r0.2/cell/mindflow.cell.UNet2D.html target=_blank rel=noopener>https://www.mindspore.cn/mindflow/docs/en/r0.2/cell/mindflow.cell.UNet2D.html</a>
(<a href=https://www.mindspore.cn/mindflow/docs/en/r0.2/_modules/mindflow/cell/unet2d.html target=_blank rel=noopener>código</a>)</li><li><a href=https://github.com/Cjl-MedSeg/U-Net target=_blank rel=noopener>https://github.com/Cjl-MedSeg/U-Net</a></li><li><a href=https://github.com/ZhouZhang233/U-Net3D target=_blank rel=noopener>https://github.com/ZhouZhang233/U-Net3D</a></li></ul></article></main></body></html>