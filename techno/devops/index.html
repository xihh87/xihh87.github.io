<!doctype html><html lang=es-mx><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>DevOps</title><link rel=stylesheet media=screen href=https://joshua.haase.mx/css/theme.min.2ee1317322f9eb9b2ef0a618d19b20e38c11f5f9c310751400a45db225dd2626.css integrity="sha256-LuExcyL565su8KYY0Zsg44wR9fnDEHUUAKRdsiXdJiY="></head><body><main><article><h1>DevOps</h1><nav id=TableOfContents><ul><li><a href=#la-nueva-definición-de-hecho>La nueva definición de hecho</a></li><li><a href=#integración-continua>Integración continua</a></li><li><a href=#gestión-de-secretos>Gestión de secretos</a></li><li><a href=#herramientas-para-infrastructure-as-code-iac>Herramientas para Infrastructure as Code (IaC)</a></li><li><a href=#ansible>Ansible</a></li><li><a href=#plataformas-como-servicio>Plataformas como Servicio</a></li><li><a href=#herramientas-para-contenedores>Herramientas para Contenedores</a></li><li><a href=#cómo-decidir-si-usar-iaas-paas-sas-contenedores>¿Cómo decidir si usar IaaS, PaaS, SaS, contenedores?</a></li><li><a href=#infraestructura-como-servicio>Infraestructura como servicio</a></li><li><a href=#cómo-implementarlo-a-gran-escala>Cómo implementarlo a gran escala</a></li><li><a href=#cómo-netflix-hace-devops>Cómo Netflix hace DevOps</a></li><li><a href=#implementación-continua-con-gitlab>Implementación Continua con GitLab</a></li><li><a href=#integración-continua-con-github>Integración Continua con Github</a></li><li><a href=#laboratorio-de-devops>Laboratorio de DevOps</a></li><li><a href=#recursos>Recursos</a></li></ul></nav><blockquote><p>&ldquo;Alinear gente, procesos y productos para entregar valor al usuario final.&rdquo;</p></blockquote><p>Para alcanzar este objetivo hay que aumentar el valor y eliminar el desperdicio.
Se trata de reducir el tiempo de respuesta en el ciclo Observar-Orientar-Decidir-Actuar.</p><p>La automatización puede ayudar a acelerar el ciclo de retroalimentación.</p><p>Hay varias herramientas que se utilizan para ser efectivo:</p><ul><li>Gestión de versiones.</li><li>Revisión entre pares.</li><li>Pruebas automáticas.</li><li>Gestión de la configuración.</li><li>Integración continua.</li><li>Despliegue continuo.</li></ul><p>Prácticas:</p><ul><li>Configuration Management</li><li>Release Management</li><li>Continuous Integration</li><li>Continuous Deployment</li><li>Testing Automation</li><li>Application Performance Monitoring</li><li>Infrastructure as Code</li></ul><p>Hábitos:</p><ul><li>Rigorous Technical Debt Management</li><li>Team autonomy & Enterprise Alignment</li><li>Focus on Client Value</li><li>Live Site Culture</li><li>Hipótesis Driven Development</li><li>Evidence Gathered in Production</li><li>Manage Infrastructure as a Flexible Resource</li></ul><p>DevOps puede cumplir con la regulación
y los requisitos de seguridad más fácil
porque las revisiones se establecen en el proceso
y las protecciones son más parecidas a los cambios normales.</p><p>Para implementar DevOps, hablar de:</p><ul><li>Mejorar el tiempo para corregir problemas.</li><li>El tiempo para generar valor.</li><li>La capacidad de probar qué funciona y qué no.</li><li>Mejorar el rendimiento y agilizar la operación.</li></ul><p>Es muy importante revisar la automatización de las alertas con la causa real
y generar software que sepa que las cosas fallan y pueda lidiar con ello.</p><p><a href=https://channel9.msdn.com/Blogs/DevOps-Interviews/Interview-with-Sam-Guckenheimer target=_blank rel=noopener>Si optimizas para velocidad, vas a obtener los beneficios de costo</a></p><p>Todos los cambios deben probarse en grupos pequeños.</p><ul><li><p>Exploratory testing</p></li><li><p>Exposure control.</p></li><li><p>A/B Testing</p></li><li><p>Feature Flagging</p></li><li><p>Blue Green -> +1 con rollback en caso de falla</p></li></ul><p>Cuando hay una interfaz de usuario se necesita intervención humana.</p><h2 id=la-nueva-definición-de-hecho><a href=#la-nueva-definici%c3%b3n-de-hecho alt>La nueva definición de hecho</a> <a href=# alt="Regresar al inicio">↑</a></h2><blockquote><p>Aplicaste el cambio
y existe monitoreo
que te permite validar tu hipótesis.</p></blockquote><p>La telemetría te permite contestar las preguntas.
La telemetría no es excluyente con los logs.</p><p><a href=https://www.jamesshore.com/v2/blog/2019/dont-measure-unit-test-code-coverage target=_blank rel=noopener>Las mediciones podrían tener un efecto distinto al esperado</a>.</p><h2 id=integración-continua><a href=#integraci%c3%b3n-continua alt>Integración continua</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Como <a href=https://www.jamesshore.com/v2/blog/2005/continuous-integration-is-an-attitude target=_blank rel=noopener>la integración continua es una actitud y no una herramienta</a>
<a href=https://www.jamesshore.com/v2/blog/2006/continuous-integration-on-a-dollar-a-day target=_blank rel=noopener>se puede implementar un proceso de integración contínua
usando una computadora vieja para construir los paquetes</a>.
y probablemente <a href=https://www.jamesshore.com/v2/blog/2012/what-does-a-good-test-suite-look-like target=_blank rel=noopener>ejecutando las pruebas que funcionan como una red de seguridad</a>.</p><h2 id=gestión-de-secretos><a href=#gesti%c3%b3n-de-secretos alt>Gestión de secretos</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Los 3 cosas que deben gestionarse con Secrets Management</p><ul><li>Contraseñas</li><li>Cadenas de conexión</li><li>Información personal</li></ul><h2 id=herramientas-para-infrastructure-as-code-iac><a href=#herramientas-para-infrastructure-as-code-iac alt>Herramientas para Infrastructure as Code (IaC)</a> <a href=# alt="Regresar al inicio">↑</a></h2><p><a href=https://docs.microsoft.com/en-us/azure/virtual-machines/linux/terraform-create-complete-vm target=_blank rel=noopener>Terraform</a>,
Vagrant,
<a href=https://docs.microsoft.com/en-us/azure/virtual-machines/linux/ansible-create-vm#create-a-virtual-machine target=_blank rel=noopener>Ansible</a>,
Puppet,
<a href=https://www.microsoft.com/developerblog/2017/05/09/provision-configure-infrastructure-azure-using-saltstack/ target=_blank rel=noopener>SaltStack</a>
Chef,
<a href=https://docs.docker.com/ target=_blank rel=noopener>Docker</a>,
Microsoft Windows PowerShell DSC,
Azure Resource Management templates.</p><hr><p><a href=https://www.hashicorp.com/resources/should-my-team-really-need-to-know-terraform target=_blank rel=noopener>No es necesario que todos los ingenieros sepan IaC
para que la compañía reciba valor</a>.</p><h2 id=ansible><a href=#ansible alt>Ansible</a> <a href=# alt="Regresar al inicio">↑</a></h2><p><a href=https://docs.ansible.com/ansible/2.7/modules/list_of_all_modules.html target=_blank rel=noopener>Todos los módulos de Ansible</a></p><p><a href=https://docs.ansible.com/ansible/2.7/modules/modules_by_category.html target=_blank rel=noopener>Módulos de Ansible por categoría</a></p><p>Ansible provee información de los sistemas:</p><pre><code>ansible -m setup localhost | less
</code></pre><p>Los roles se pueden descargar usando:</p><pre><code>ansible-galaxy search [feature]
ansible-galaxy info [role]
ansible-galaxy install [owner].[role]
</code></pre><p><a href=https://molecule.readthedocs.io/en/latest/configuration.html target=_blank rel=noopener>Los módulos se pueden verificar con Molecule y Testinfra</a></p><h2 id=plataformas-como-servicio><a href=#plataformas-como-servicio alt>Plataformas como Servicio</a> <a href=# alt="Regresar al inicio">↑</a></h2><h2 id=herramientas-para-contenedores><a href=#herramientas-para-contenedores alt>Herramientas para Contenedores</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Docker Compose
Docker Swarm
Apache Mesos
Mesosphere DCOS
Kubernetes
<a href=https://fleet.rancher.io/#what-is-fleet target=_blank rel=noopener>Fleet</a>
Azure Container Service</p><p><a href='https://channel9.msdn.com/Blogs/containers/Containers-101-with-Microsoft-and-Docker?ocid=player' target=_blank rel=noopener>Containers 101</a></p><p><a href=https://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/ target=_blank rel=noopener>Puedes compartir el docker con una instancia dentro de docker así</a>:</p><pre tabindex=0><code>docker run -v /var/run/docker.sock:/var/run/docker.sock
</code></pre><p><a href=https://docs.gitlab.com/ee/user/packages/container_registry/ target=_blank rel=noopener>Puedes usar docker dentro de GitLab</a></p><p>Las <a href=https://docs.docker.com/develop/develop-images/dockerfile_best-practices/ target=_blank rel=noopener>mejores prácticas para el Dockerfile</a>
y <a href=https://docs.docker.com/develop/dev-best-practices/ target=_blank rel=noopener>mejores prácticas para desarrollar en docker</a>.</p><h2 id=cómo-decidir-si-usar-iaas-paas-sas-contenedores><a href=#c%c3%b3mo-decidir-si-usar-iaas-paas-sas-contenedores alt>¿Cómo decidir si usar IaaS, PaaS, SaS, contenedores?</a> <a href=# alt="Regresar al inicio">↑</a></h2><ul><li>Si necesitas agregar máquinas escalando a x: IaaS.</li><li>Si necesitas escalar bajo demanda y no importa mucho el número de máquinas: PaaS.</li></ul><p><a href='/home/xu/web/go.microsoft.com/fwlink/index.html?LinkId=862819&amp;clcid=0x409'>Guía de desarrollo de Azure</a></p><p><a href=https://github.com/Azure/azure-quickstart-templates target=_blank rel=noopener>Templates to deploy on Azure</a></p><h2 id=infraestructura-como-servicio><a href=#infraestructura-como-servicio alt>Infraestructura como servicio</a> <a href=# alt="Regresar al inicio">↑</a></h2><p><a href=https://www.hashicorp.com/resources/evolving-infrastructure-terraform-opencredo target=_blank rel=noopener>Hay una evolución de cómo se organiza la infraestructura en Terraform</a>:</p><ul><li>Monolito</li><li>Monolito por entorno de desarrollo</li><li>Módulos comunes usados por los monolitos.</li><li>Usar módulos por cada parte de la infraestructura que aprovechan los módulos (terraservices).</li></ul><p>La infraestructura para gestionar los cambios que se realizan en equipo.
Hay herramientas como <a href=https://terragrunt.gruntwork.io/docs/features/keep-your-terraform-code-dry/ target=_blank rel=noopener>Terragrunt</a> para mantener el código limpio.</p><p><a href=https://medium.com/@benhigg/terraform-and-infrastructure-as-code-a-bit-of-a-rant-1b8693e3c005 target=_blank rel=noopener>Conviene separar las características de la infraestructura de acuerdo a su tasa de cambio</a></p><p><a href=https://blog.gruntwork.io/cloud-nuke-how-we-reduced-our-aws-bill-by-85-f3aced4e5876 target=_blank rel=noopener>Desde Gruntwork recomiendan utilizar auto-destructores para las infraestructuras de pruebas</a></p><p><a href=https://terratest.gruntwork.io/docs/getting-started/quick-start/ target=_blank rel=noopener>Para probar infraestructura en Terraform, se puede usar Terratest</a></p><h2 id=cómo-implementarlo-a-gran-escala><a href=#c%c3%b3mo-implementarlo-a-gran-escala alt>Cómo implementarlo a gran escala</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Paso a paso,
es un proceso que toma tiempo.
Se requieren desarrollar herramientas que empoderan el proceso.</p><p>Se trata de acelerar el ritmo de la innovación.</p><p><a href=https://channel9.msdn.com/events/Build/2016/B846 target=_blank rel=noopener>Para mantener los equipos alineados leer el libro «Drive—Daniel H. Pink»</a></p><p>El monitoreo debe tener alertas accionables,
preferentemente se debe tener trazabilidad a responsabilidad individual.</p><ul><li><p>Optimizar <em>Time to Detect</em> MTTD & <em>Time to Mitigate</em> MTTR.</p></li><li><p>Pero hacer que no provoque aversión al cambio.</p></li></ul><h2 id=cómo-netflix-hace-devops><a href=#c%c3%b3mo-netflix-hace-devops alt>Cómo Netflix hace DevOps</a> <a href=# alt="Regresar al inicio">↑</a></h2><div style=position:relative;padding-bottom:56.25%;overflow:hidden><iframe style=position:absolute;width:100%;height:100% src='https://www.youtube.com/embed/UTKIT6STSVM?enablejsapi=1&' allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy=strict-origin-when-cross-origin allowfullscreen frameborder=0 referrerpolicy=strict-origin-when-cross-origin title='How Netflix Thinks of DevOps'></iframe></div></br><ul><li><p>Libertad y responsabilidad</p><ul><li><p>Dar a todos acceso a producción</p></li><li><p>Enfocarse en permitir a las personas hacer su trabajo especializado</p></li><li><p>Permitir que haya confianza entre equipos</p></li></ul></li><li><p>Contexto sobre control</p></li><li><p>Utilizar información para tomar decisiones</p></li></ul><h2 id=implementación-continua-con-gitlab><a href=#implementaci%c3%b3n-continua-con-gitlab alt>Implementación Continua con GitLab</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Se configura usando <a href=https://docs.gitlab.com/ee/ci/yaml/ target=_blank rel=noopener><code>.gitlab-ci.yml</code></a></p><p>Se puede <a href=https://about.gitlab.com/blog/2019/08/28/building-build-images/ target=_blank rel=noopener>construir una imagen de docker dentro de otro docker</a>
<a href=https://www.digitalocean.com/community/tutorials/how-to-build-docker-images-and-host-a-docker-image-repository-with-gitlab target=_blank rel=noopener>y desde GitLab</a>.</p><p>Para versionar,
<a href=https://blog.newrelic.com/engineering/docker-images-continuous-integration/ target=_blank rel=noopener>conviene usar fecha y commit</a>
y conviene medir el tamaño de cada imagen construida.</p><p><a href=https://hackernoon.com/docker-and-best-practices-for-devops-c53ta30ki target=_blank rel=noopener>Buenas prácticas de docker</a> usar <code>COPY</code> tan cerca del final como se pueda, alpine, usuario sin privilegios, firmar el contenido.</p><p><a href=https://snyk.io/blog/10-docker-image-security-best-practices/ target=_blank rel=noopener>Verificar sintaxis, firmar, verificar imágenes del hub</a>.</p><p><a href=https://docs.gitlab.com/ee/ci/examples/README.html target=_blank rel=noopener>https://docs.gitlab.com/ee/ci/examples/README.html</a>
<a href=https://docs.gitlab.com/ee/ci/variables/README.html target=_blank rel=noopener>https://docs.gitlab.com/ee/ci/variables/README.html</a>
<a href=https://docs.gitlab.com/ee/ci/environments.html target=_blank rel=noopener>https://docs.gitlab.com/ee/ci/environments.html</a>
<a href=https://docs.gitlab.com/ee/user/project/pages/index.html target=_blank rel=noopener>https://docs.gitlab.com/ee/user/project/pages/index.html</a>
<a href=https://docs.gitlab.com/ee/user/project/pages/getting_started_part_four.html target=_blank rel=noopener>https://docs.gitlab.com/ee/user/project/pages/getting_started_part_four.html</a></p><h2 id=integración-continua-con-github><a href=#integraci%c3%b3n-continua-con-github alt>Integración Continua con Github</a> <a href=# alt="Regresar al inicio">↑</a></h2><p><a href=https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions target=_blank rel=noopener>Documentación oficial de Github Actions</a>.</p><p>Los flujos de trabajo se configuran usando <code>nombre.yml</code>
dentro del directorio <code>.github/workflows/</code>.</p><p>Existen <a href='https://github.com/marketplace?type=actions' target=_blank rel=noopener>flujos de trabajo preparados</a>
y <a href=https://docs.github.com/en/actions/creating-actions/about-custom-actions target=_blank rel=noopener>se pueden hacer acciones compartidos</a>.
Cada acción documenta sus parámetros en su sitio.</p><p>Hacer tu propia acción puede ser tan sencilla como:</p><ul><li>Generar una imagen de docker (o el <code>Dockerfile</code>.</li><li>Agregar en el repositorio un archivo <code>action.yml</code></li></ul><h2 id=laboratorio-de-devops><a href=#laboratorio-de-devops alt>Laboratorio de DevOps</a> <a href=# alt="Regresar al inicio">↑</a></h2><h2 id=recursos><a href=#recursos alt>Recursos</a> <a href=# alt="Regresar al inicio">↑</a></h2><p><a href=https://opensource.com/article/17/12/10-must-read-devops-books target=_blank rel=noopener>10 libros recomendados en OpenSource.com</a></p><p><a href=https://cloud.google.com/solutions/best-practices-for-building-containers target=_blank rel=noopener>Buenas prácticas para docker</a></p><p><a href=https://dzone.com/articles/unit-testing-amp-devops target=_blank rel=noopener>Las pruebas unitarias son imprescindibles para DevOps</a></p><p><a href=https://dzone.com/articles/devops-anonymous-lessons-learned-from-building-clo target=_blank rel=noopener>Se recomienda hacer las cosas de la manera más sencilla posible que aporte valor</a></p></article><section id=list><h2>Recursos</h2><ul class=contents></ul></section></main></body></html>