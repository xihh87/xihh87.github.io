<!doctype html><html lang=es-mx><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Falla en el servicio de red</title>
<link rel=stylesheet media=screen href=https://joshua.haase.mx/css/theme.min.2ee1317322f9eb9b2ef0a618d19b20e38c11f5f9c310751400a45db225dd2626.css integrity="sha256-LuExcyL565su8KYY0Zsg44wR9fnDEHUUAKRdsiXdJiY="></head><body><main><article><h1>Falla en el servicio de red</h1><nav id=TableOfContents></nav><p>Resulta que no hay internet para hacer mi trabajo&mldr;</p><p>Desde mesa de ayuda, dicen que es un corte de fibra
y el proveedor de internet está revisando.</p><p>Sin embargo pasa algo curioso,
sí llego a la IP de google <code>8.8.8.8</code>
(aunque sí hay pérdida de paquetes):</p><pre tabindex=0><code>$ ping 8.8.8.8 -c 10
PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
[...]
--- 8.8.8.8 ping statistics ---
10 packets transmitted, 5 received, 50% packet loss, time 9020ms
rtt min/avg/max/mdev = 40.195/42.946/46.303/2.204 ms
</code></pre><p>Llegamos a google por este caminito:</p><pre tabindex=0><code># traceroute -T -p 53 8.8.8.8
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  * * *
 2  192.168.105.254 (192.168.105.254)  20.898 ms  21.860 ms  21.871 ms
 3  10.0.0.2 (10.0.0.2)  27.942 ms  27.949 ms  29.256 ms
 4  187.189.204.225 (187.189.204.225)  29.341 ms  44.772 ms  44.772 ms &lt;- TOTAL PLAY TELECOMUNICACIONES SA DE CV
 5  10.115.156.2 (10.115.156.2)  77.394 ms  79.392 ms * &lt;- la red local de alguien
 6  * * *
 7  * * *
 8  * hu0-0-0-0.rcr21.mex01.atlas.cogentco.com (38.104.248.153)  132.914 ms  117.457 ms
 9  * * *
10  * * 154.54.47.45 (154.54.47.45)  27.779 ms
11  * 154.54.41.66 (154.54.41.66)  31.736 ms 154.54.44.230 (154.54.44.230)  29.163 ms
12  * * 154.54.47.214 (154.54.47.214)  32.802 ms
13  * * 154.54.12.106 (154.54.12.106)  47.301 ms &lt;- Cogent Comunications
14  72.14.219.124 (72.14.219.124)  47.273 ms * * &lt;- GOOGLE
15  108.170.240.67 (108.170.240.67)  39.382 ms 108.170.240.130 (108.170.240.130)  38.040 ms 108.170.240.67 (108.170.240.67)  39.362 ms
16  * 64.233.174.163 (64.233.174.163)  37.262 ms *
17  * 66.249.95.218 (66.249.95.218)  40.733 ms *
18  * 209.85.248.7 (209.85.248.7)  41.463 ms *
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  * * *
25  * * *
26  * * *
27  google-public-dns-a.google.com (8.8.8.8)  41.668 ms * *
</code></pre><p>Y si intento ver la página web de google&mldr;</p><pre tabindex=0><code>traceroute -T -p 80 216.239.32.10
[sudo] password for joshpar:
traceroute to 216.239.32.10 (216.239.32.10), 30 hops max, 60 byte packets
 1  * * *
 2  192.168.105.254 (192.168.105.254)  18.677 ms  19.621 ms  19.618 ms
 3  10.0.0.2 (10.0.0.2)  21.391 ms  21.627 ms  22.224 ms
 4  fixed-189-204-187-189-204-225.iusacell.net (187.189.204.225)  23.627 ms  25.687 ms  26.241 ms
 5  10.115.156.2 (10.115.156.2)  26.212 ms *  35.380 ms
 6  * 10.180.59.70 (10.180.59.70)  16.852 ms *
 7  * * *
 8  hu0-0-0-0.rcr21.mex01.atlas.cogentco.com (38.104.248.153)  17.070 ms * *
 9  * * be2692.rcr21.mfe02.atlas.cogentco.com (154.24.23.25)  18.259 ms
10  * * *
11  * be2443.ccr22.dfw01.atlas.cogentco.com (154.54.44.230)  37.569 ms *
12  be2763.ccr41.dfw03.atlas.cogentco.com (154.54.28.74)  39.484 ms * be2764.ccr41.dfw03.atlas.cogentco.com (154.54.47.214)  39.946 ms
13  154.54.12.106 (154.54.12.106)  36.182 ms *  37.572 ms &lt;- Cogent Co, justo antes de llegar a google en la otra traza
14  * * *
15  * * *
16  * * *
17  * * *
18  * * *
19  * * *
20  * * *
21  * * *
22  * * *
23  * * *
24  * * *
25  * * *
26  * * *
27  * * *
28  * * *
29  * * *
30  * * *
</code></pre><p>Sabemos que a nuestro ISP llegamos sin problemas:</p><pre tabindex=0><code>$ ping 187.189.204.225
PING 187.189.204.225 (187.189.204.225) 56(84) bytes of data.
[...]
--- 187.189.204.225 ping statistics ---
10 packets transmitted, 10 received, 0% packet loss, time 9012ms
rtt min/avg/max/mdev = 1.638/19.164/139.944/41.365 ms
</code></pre><p>Y Cogent Co no responde los pings
(como debe hacer quien esté interesado en la seguridad de sus equipos
y no tenga servicios públicos alojados allí).</p><pre tabindex=0><code>$ ping -c 10 38.104.248.153
PING 38.104.248.153 (38.104.248.153) 56(84) bytes of data.

--- 38.104.248.153 ping statistics ---
10 packets transmitted, 0 received, 100% packet loss, time 9008ms
</code></pre><p>Y curiosamente sí llegamos a wiki.nyu.edu por https,
aunque no responde por ping:</p><pre tabindex=0><code># traceroute -T -p 443 199.119.125.132
traceroute to 199.119.125.132 (199.119.125.132), 30 hops max, 60 byte packets
 1  * * *
 2  192.168.105.254 (192.168.105.254)  7.039 ms  7.123 ms  9.169 ms
 3  10.0.0.2 (10.0.0.2)  12.443 ms  14.204 ms  20.435 ms
 4  fixed-189-204-187-189-204-225.iusacell.net (187.189.204.225)  20.442 ms  23.621 ms  23.621 ms
 5  10.115.156.2 (10.115.156.2)  24.836 ms *  26.023 ms
 6  * * *
 7  * * *
 8  hu0-0-0-0.rcr21.mex01.atlas.cogentco.com (38.104.248.153)  15.067 ms  18.018 ms  15.183 ms
 9  * 154.54.41.130 (154.54.41.130)  29.551 ms be2692.rcr21.mfe02.atlas.cogentco.com (154.24.23.25)  28.329 ms
10  be2887.ccr21.iah01.atlas.cogentco.com (154.54.47.33)  26.898 ms 154.54.47.45 (154.54.47.45)  25.046 ms be2887.ccr21.iah01.atlas.coge
ntco.com (154.54.47.33)  25.890 ms
11  be2443.ccr22.dfw01.atlas.cogentco.com (154.54.44.230)  29.669 ms 154.54.41.66 (154.54.41.66)  30.251 ms *
12  * be2763.ccr41.dfw03.atlas.cogentco.com (154.54.28.74)  30.937 ms  54.314 ms
13  * * *
14  * * *
15  4.53.161.214 (4.53.161.214)  60.226 ms * *
16  * 199.119.120.18 (199.119.120.18)  63.718 ms  65.036 ms
17  199-119-120-46.contegix.com (199.119.120.46)  66.612 ms  66.584 ms  69.139 ms
18  199-119-125-136.contegix.com (199.119.125.136)  82.689 ms * *
19  199-119-125-132.contegix.com (199.119.125.132)  67.609 ms  69.992 ms *


$ ping -c 10 199.119.125.132
PING 199.119.125.132 (199.119.125.132) 56(84) bytes of data.

--- 199.119.125.132 ping statistics ---
10 packets transmitted, 0 received, 100% packet loss, time 8999ms

$ ping wiki.nyu.edu
ping: wiki.nyu.edu: Name or service not known
</code></pre><p>Sin embargo, al conectarse directamente,
muestra un comportamiento similar a firewall
(¿o pérdida de datos?):</p><pre tabindex=0><code>$ nc -v -w 1 199.119.125.132 443   # wiki.nyu.edu
nc: connect to 199.119.125.132 port 443 (tcp) timed out: Operation now in progress

$ nc -v -w 1 189.203.168.103 80    # google.com
nc: connect to 189.203.168.103 port 80 (tcp) timed out: Operation now in progress
</code></pre><p>Y cuando el servicio vuelve,
sigue intermitente&mldr;</p><pre tabindex=0><code>$ while true; do nc -vzw1 50.18.192.251 443; done    #duckduckgo.com
nc: connect to 50.18.192.251 port 443 (tcp) timed out: Operation now in progress
nc: connect to 50.18.192.251 port 443 (tcp) timed out: Operation now in progress
Connection to 50.18.192.251 443 port [tcp/https] succeeded!
Connection to 50.18.192.251 443 port [tcp/https] succeeded!
Connection to 50.18.192.251 443 port [tcp/https] succeeded!
Connection to 50.18.192.251 443 port [tcp/https] succeeded!
nc: connect to 50.18.192.251 port 443 (tcp) timed out: Operation now in progress
nc: connect to 50.18.192.251 port 443 (tcp) timed out: Operation now in progress
Connection to 50.18.192.251 443 port [tcp/https] succeeded!
Connection to 50.18.192.251 443 port [tcp/https] succeeded!
Connection to 50.18.192.251 443 port [tcp/https] succeeded!
nc: connect to 50.18.192.251 port 443 (tcp) timed out: Operation now in progress
nc: connect to 50.18.192.251 port 443 (tcp) timed out: Operation now in progress
nc: connect to 50.18.192.251 port 443 (tcp) timed out: Operation now in progress
nc: connect to 50.18.192.251 port 443 (tcp) timed out: Operation now in progress
Connection to 50.18.192.251 443 port [tcp/https] succeeded!
Connection to 50.18.192.251 443 port [tcp/https] succeeded!
nc: connect to 50.18.192.251 port 443 (tcp) timed out: Operation now in progress
nc: connect to 50.18.192.251 port 443 (tcp) timed out: Operation now in progress
Connection to 50.18.192.251 443 port [tcp/https] succeeded!
nc: connect to 50.18.192.251 port 443 (tcp) timed out: Operation now in progress
Connection to 50.18.192.251 443 port [tcp/https] succeeded!
nc: connect to 50.18.192.251 port 443 (tcp) timed out: Operation now in progress
</code></pre><p>Así que recapitulando:</p><ul><li>no funciona la resolución de dominios,</li><li>(posiblemente) hay ¿un firewall? que impide la conexión a varios sitios,</li><li>no hay pérdida de conexión entre nosotros y nuestro proveedor de internet.</li></ul><p>¿Tendrá que ver con <a href=https://www.schneier.com/blog/archives/2016/09/someone_is_lear.html title="Blog de Bruce Schneier." target=_blank rel=noopener>quien está aprendiendo a dejar sin servicio internet</a>?</p><p>¿Deberíamos contratar una VPN en Holanda (p. e.) para seguir teniendo internet cuando pasen estas cosas?</p><pre tabindex=0><code>$ ping -c 10 urania
PING urania (46.226.109.7) 56(84) bytes of data.
[...]
--- urania ping statistics ---
10 packets transmitted, 10 received, 0% packet loss, time 9009ms
rtt min/avg/max/mdev = 135.764/206.351/361.321/68.725 ms

$ ping -c 10 8.8.8.8
[...]
--- 8.8.8.8 ping statistics ---
10 packets transmitted, 4 received, 60% packet loss, time 9027ms
rtt min/avg/max/mdev = 38.935/40.177/42.097/1.201 ms
</code></pre><p>Y más tarde, cuando de repente funciona algo&mldr; intermitencias en red local:</p><pre tabindex=0><code>$ ping 192.168.105.78
PING  192.168.105.78 56(84) bytes of data.
[...]
--- 192.168.105.78 ping statistics ---
69 packets transmitted, 36 received, 47% packet loss, time 68073ms
rtt min/avg/max/mdev = 1.333/1.761/8.451/1.152 ms
</code></pre><p>Bien podría ser que sólo esté mal la red local.</p><hr><p>Al día siguiente:</p><pre tabindex=0><code>$ ping -c 100 192.168.105.78
PING 192.168.105.78 56(84) bytes of data.
[...]
--- 192.168.105.78 ping statistics ---
100 packets transmitted, 100 received, 0% packet loss, time 99149ms
rtt min/avg/max/mdev = 0.934/4.352/113.683/15.494 ms
</code></pre><pre tabindex=0><code>$ ping -c 100 8.8.8.8
[...]
--- 8.8.8.8 ping statistics ---
100 packets transmitted, 65 received, 35% packet loss, time 99250ms
rtt min/avg/max/mdev = 39.055/42.877/240.224/24.680 ms
</code></pre></article></main></body></html>