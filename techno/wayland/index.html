<!doctype html><html lang=es-mx><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Anotaciones acerca de wayland</title><link rel=stylesheet media=screen href=https://joshua.haase.mx/css/theme.min.c631e12f4e2b4b8b5282c3d94590678b7a225e8caccee02c0d37dac1838d6a61.css integrity="sha256-xjHhL04rS4tSgsPZRZBni3oiXoyszuAsDTfawYONamE="></head><body><main><article><h1>Anotaciones acerca de wayland</h1><nav id=TableOfContents><ul><li><a href=#instalar-dwl>Instalar <code>dwl</code></a></li><li><a href=#instalar-xwayland-y-ejecutarlo-en-tu-sesión>Instalar <code>Xwayland</code> y ejecutarlo en tu sesión</a></li><li><a href=#qué-es-xdg-desktop-portal>¿Qué es <code>xdg-desktop-portal</code>?</a></li><li><a href=#mi-apreciación>Mi apreciación</a></li><li><a href=#cosas-pendientes>Cosas pendientes</a></li></ul></nav><p>Supuestamente la nueva evolución de entorno gráfico es <a href=https://wayland.freedesktop.org/docs/html/ target=_blank rel=noopener>Wayland</a>
que permite que las aplicaciones dibujen ellas mismas su interfaz gráfica
y actualizar instantáneamente las aplicaciones cambiando entre secciones de memoria.</p><p>Aún no lo he probado porque uso <a href=https://dwm.suckless.org/ target=_blank rel=noopener>dwm</a> que funciona sobre X.</p><p>Parece que <a href=https://wiki.archlinux.org/title/Screen_capture#Wayland target=_blank rel=noopener>a veces la gente tiene problemas para compartir pantalla con Wayland</a>
y <a href=https://github.com/swaywm/sway/wiki/i3-Migration-Guide target=_blank rel=noopener>hay que reemplazar varias aplicaciones por su contraparte en Wayland</a>.</p><h2 id=instalar-dwl><a href=#instalar-dwl alt>Instalar <code>dwl</code></a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Cómo no quiero aprender a usar <code>sway</code>
encontré <a href=https://github.com/djpohly/dwl target=_blank rel=noopener><code>dwl</code>, un gestor de ventanas dinámicas para wayland</a></p><p>Instalé además <a href=https://sr.ht/~raphi/somebar/ target=_blank rel=noopener><code>somebar</code></a>
que muestra la barra que aparece arriba de la pantalla en <code>dwm</code>,
aunque tengo dudas de la calidad del código y si podría atacarse.</p><p>Para hacer cómodo el sistema
instalé <a href=https://github.com/swaywm/sway/wiki/i3-Migration-Guide target=_blank rel=noopener>aplicaciones recomendadas para <code>sway</code></a>
y <a href=https://wiki.archlinux.org/title/List_of_applications/Other title="Aplicaciones recomendadas para `wayland`" target=_blank rel=noopener><code>wayland</code></a>.</p><pre tabindex=0><code>$ git clone https://gitlab.com/xihh87/my-workstation
$ cd my-workstation
$ ansible -m include_role -a name=wayland localhost
</code></pre><h2 id=instalar-xwayland-y-ejecutarlo-en-tu-sesión><a href=#instalar-xwayland-y-ejecutarlo-en-tu-sesi%c3%b3n alt>Instalar <code>Xwayland</code> y ejecutarlo en tu sesión</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Las aplicaciones de X necesitan utilizar un servidor X,
que se puede ejecutar en modo &ldquo;desenraizado&rdquo; (rootless)
para que las aplicaciones tengan sus propias ventanas como normalmente.</p><h2 id=qué-es-xdg-desktop-portal><a href=#qu%c3%a9-es-xdg-desktop-portal alt>¿Qué es <code>xdg-desktop-portal</code>?</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Al instalar <del>wayland</del>
la sesión wayland de GNOME,
se coló <a href=https://github.com/emersion/xdg-desktop-portal-wlr target=_blank rel=noopener><code>xdg-desktop-portal</code></a>
que al parecer permite la comunicación y el envío de documentos
entre sistemas como <code>flatpack</code> y tal vez otros contenedores.</p><p>Y <a href=https://jgrulich.cz/2018/07/04/how-to-enable-and-use-screen-sharing-on-wayland/ target=_blank rel=noopener>parece ser necesario para compartir tu pantalla en wayland</a></p><h2 id=mi-apreciación><a href=#mi-apreciaci%c3%b3n alt>Mi apreciación</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Aún no aprecio las maravillosas ventajas de
<a href=https://wayland.freedesktop.org/architecture.html title="Separar compositor del render." target=_blank rel=noopener>separar el compositor del generador</a>,
<a href=https://wayland-book.com/libwayland/wayland-scanner.html target=_blank rel=noopener>generar protocolos en XML para definir el comportamiento y comunicación entre aplicaciones</a>,
migrar todas tus aplicaciones al nuevo protocolo
y <a href=https://roscidus.com/blog/blog/2021/10/30/xwayland/#overview target=_blank rel=noopener>de todas formas tener que ejecutar X</a>:</p><p><a href=https://roscidus.com/blog/blog/2021/10/30/xwayland/#overview target=_blank rel=noopener><figure><img src=https://roscidus.com/blog/images/xwayland/real-xwayland.png><figcaption>Al parecer no funciona como debería</figcaption></figure></a></p><p>No iría tan lejos como para decir que <a href=https://gist.github.com/probonopd/9feb7c20257af5dd915e3a9f2d1f2277 target=_blank rel=noopener>es necesario boicoterlo</a>
pero sí estoy inconforme con la promesa que presenta.</p><h2 id=cosas-pendientes><a href=#cosas-pendientes alt>Cosas pendientes</a> <a href=# alt="Regresar al inicio">↑</a></h2><ul><li><p>☑ Al parecer necesito <a href=https://hg.sr.ht/~scoopta/wlrobs target=_blank rel=noopener><code>wlrobs</code></a>
para compartir pantalla en OBS.</p></li><li><p>☐ <a href=https://gitlab.com/xihh87/my-workstation/-/issues/4 target=_blank rel=noopener>Configurar una sesión de usuario que levante estos programas con <code>s6</code></a>.</p></li></ul></article></main></body></html>