<!doctype html><html lang=es-mx><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Más notas acerca de R</title>
<link rel=stylesheet media=screen href=https://joshua.haase.mx/css/theme.min.2ee1317322f9eb9b2ef0a618d19b20e38c11f5f9c310751400a45db225dd2626.css integrity="sha256-LuExcyL565su8KYY0Zsg44wR9fnDEHUUAKRdsiXdJiY="></head><body><main><article><h1>Más notas acerca de R</h1><nav id=TableOfContents><ul><li><a href=#cómo-quiero-usar-r>Cómo quiero usar R</a></li><li><a href=#trucos-para-r>Trucos para R</a><ul><li><a href=#re-usar-listas-de-variables>Re-usar listas de variables</a></li></ul></li><li><a href=#consejos-para-hacer-los-ejemplos-reproducibles>Consejos para hacer los ejemplos reproducibles</a></li><li><a href=#cómo-generar-paquetes-de-r>Cómo generar paquetes de R</a></li><li><a href=#generar-bibliotecas-de-r>Generar bibliotecas de R</a><ul><li><a href=#usar-biblioteca-local>Usar biblioteca local</a></li></ul></li><li><a href=#redimensionar-gráficas-divididas>redimensionar gráficas divididas</a></li><li><a href=#gestionar-tiempo-en-r>Gestionar tiempo en R</a></li><li><a href=#recursos-para-programar-eficientemente-en-r>Recursos para programar eficientemente en R</a></li><li><a href=#recursos-que-no-he-leído-pero-suenan-interesantes>Recursos que no he leído pero suenan interesantes</a></li></ul></nav><h2 id=cómo-quiero-usar-r><a href=#c%c3%b3mo-quiero-usar-r alt>Cómo quiero usar R</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Me gusta el <a href=../desarrollo/#desarrollo-dirigido-por-pruebas-tdd>desarrollo basado en pruebas</a>
<a href=./tdd/>en R</a>,
<a href=../desarrollo/#Desarrollo-dirigido-por-LE%c3%89ME>desarrollo basado en README</a>
y coincido con que <a href=https://yihui.org/en/2018/09/notebook-war/ target=_blank rel=noopener>usar <code>Rmarkdown</code> incentiva malos hábitos</a>.</p><p>Comparto la opinión de que
<a href=https://drivendata.github.io/cookiecutter-data-science/#analysis-is-a-dag target=_blank rel=noopener>&ldquo;el análisis de datos es un grafo acíclico dirigido (DAG)&rdquo;</a>,
<a href=https://drivendata.github.io/cookiecutter-data-science/#why-use-this-project-structure target=_blank rel=noopener>&ldquo;su calidad consiste en ser correcto y reproducible&rdquo;</a>
y <a href='https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1000424' target=_blank rel=noopener>conviene tener una organización lógica</a> para realizarlo.</p><h2 id=trucos-para-r><a href=#trucos-para-r alt>Trucos para R</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Cambiar los NA por otra cosa:</p><pre tabindex=0><code># https://stackoverflow.com/questions/8161836/how-do-i-replace-na-values-with-zeros-in-an-r-dataframe
mutate_all(funs(replace(., is.na(.), 0))))
</code></pre><p>Para medir el tiempo de ejecución:</p><pre tabindex=0><code>ptm &lt;- proc.time()
# Código
proc.time() - ptm
</code></pre><p>Guardar datos:</p><pre tabindex=0><code>write.table(
	intra$V2,
	file = &#34;results/Kdb_controls_p1.intra.pvalues&#34;,
	quote = FALSE,
	col.names = FALSE,
	row.names = FALSE
)
</code></pre><p>Ver el tamaño de un objeto en memoria:</p><pre tabindex=0><code>object.size(x)

# http://tolstoy.newcastle.edu.au/R/e6/help/09/01/1121.html
# mostrar los objetos en memoria
sort(sapply(ls(), function(x){ object.size(get(x)) }))
</code></pre><p>Bibliotecas y otras cosas de la sesión:</p><pre tabindex=0><code>sessionInfo()
</code></pre><p>Colapsar datos utilizando alguna función:</p><pre tabindex=0><code>Reduce(&#34;|&#34;, opts)
</code></pre><p>Usar el operador pipe <code>%>%</code> para hacer más sencillo leer el código:</p><pre tabindex=0><code># docs at https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html
install.packages(&#34;magrittr&#34;)
library(&#34;magrittr&#34;)
</code></pre><p>A partir de R 4.0 se puede usar <code>|></code> para componer funciones
sin importar bibliotecas adicionales.</p><p>Obtener el último valor calculado:</p><pre tabindex=0><code>.Last.value
</code></pre><p>Ayuda multi-línea en R <code>argparse</code>:</p><pre tabindex=0><code>parser &lt;- ArgumentParser(
  description=docstring,
  formatter_class= &#39;argparse.RawTextHelpFormatter&#39;
)
args &lt;- parser$parse_args()
</code></pre><h3 id=re-usar-listas-de-variables><a href=#re-usar-listas-de-variables alt>Re-usar listas de variables</a> <a href=# alt="Regresar al inicio">↑</a></h3><p><a href=https://stackoverflow.com/questions/72752240/how-to-pass-a-list-of-variables-in-which-a-transformation-should-take-place-on-r target=_blank rel=noopener>Cómo pasar lista de variables para transformaciones</a>.</p><h2 id=consejos-para-hacer-los-ejemplos-reproducibles><a href=#consejos-para-hacer-los-ejemplos-reproducibles alt>Consejos para hacer los ejemplos reproducibles</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Los ejemplos reproducibles son piezas de código mínimas
que <a href=http://adv-r.had.co.nz/Reproducibility.html title=Reproducibles target=_blank rel=noopener>siempre obtienen el mismo resultado</a>
y muestran el comportamiento esperado.</p><p>Sirven para diagnosticar problemas o mostrar uso de código.</p><ul><li><a href=https://reprex.tidyverse.org/ target=_blank rel=noopener>Pueden generarse con <code>reprex</code></a>.</li></ul><p><a href=https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example target=_blank rel=noopener>Guía para hacer ejemplos reproducibles</a>.</p><h2 id=cómo-generar-paquetes-de-r><a href=#c%c3%b3mo-generar-paquetes-de-r alt>Cómo generar paquetes de R</a> <a href=# alt="Regresar al inicio">↑</a></h2><ul><li><a href=http://rcs.bu.edu/examples/r/tutorials/BuildingPackages/ target=_blank rel=noopener>Un tutorial para hacer paquetes de R</a>.</li><li><a href=http://sherrytowers.com/2018/10/29/making-your-own-r-library-package/ target=_blank rel=noopener>Instrucciones para hacer paquetes en r</a></li><li><a href=https://sofiazaidman.com/creating-a-local-r-package-using-rstudio/ title="No se ve tan buen recurso" target=_blank rel=noopener>Hacer paquetes desde rstudio</a></li><li><a href=https://towardsdatascience.com/creating-a-custom-r-package-9a2e303d3332 target=_blank rel=noopener>Custom R package</a></li></ul><h2 id=generar-bibliotecas-de-r><a href=#generar-bibliotecas-de-r alt>Generar bibliotecas de R</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Para <a href='https://towardsdatascience.com/step-by-step-guide-to-creating-r-and-python-libraries-e81bbea87911?gi=8a63f0b4b9a9' target=_blank rel=noopener>generar bibliotecas en R</a>:</p><pre tabindex=0><code>devtools::create(&#34;pkgname&#34;)
</code></pre><h3 id=usar-biblioteca-local><a href=#usar-biblioteca-local alt>Usar biblioteca local</a> <a href=# alt="Regresar al inicio">↑</a></h3><p>Supuestamente <a href=http://rcs.bu.edu/examples/r/tutorials/BuildingPackages/r-project-setup.html#summary-create-new-r-package-workflow target=_blank rel=noopener>se puede usar una biblioteca tuya con <code>load_all</code></a>
(<a href=https://devtools.r-lib.org/reference/load_all.html target=_blank rel=noopener>docs <code>load_all</code></a>):</p><pre tabindex=0><code>devtools::load_all()
</code></pre><embed type=application/pdf src="https://raw.githubusercontent.com/rstudio/cheatsheets/main/package-development.pdf#navpanes=0&statusbar=0&pagemode=none" width=100% height=905em><p><a href=https://raw.githubusercontent.com/rstudio/cheatsheets/main/package-development.pdf>Descargar documento</a>.</p><p>Si hago una o varias bibliotecas
para tener funciones accesibles desde diferentes scripts,
necesito entonces cargar la biblioteca.</p><p>Para eso hay varias opciones:</p><ul><li><a href=https://www.stat.berkeley.edu/~paciorek/computingTips/Installing_R_libraries_loca.html target=_blank rel=noopener>Especificar en la llamada a <code>library</code> la ubicación</a>:<pre tabindex=0><code>library(packageName, lib.loc=&#34;/path/to/lib&#34;)
</code></pre></li><li><a href=https://www.r-bloggers.com/2016/08/project-package-libraries-and-reproducibility/ target=_blank rel=noopener>Instalar la biblioteca localmente</a>,
pero tiene el problema de que al actualizarla se tiene que reinstalar
(<a href=https://stackoverflow.com/a/5340311/10467443 target=_blank rel=noopener>ejemplos</a>).</li><li><a href=https://stackoverflow.com/a/5487764/10467443 target=_blank rel=noopener>Cargar el paquete con <code>load_all</code></a>:<pre tabindex=0><code>devtools::load_all(&#34;path/to/pkg&#34;)
</code></pre></li><li><a href=https://cmdlinetips.com/2012/05/how-to-install-a-r-package-locally-and-load-it-easily/ target=_blank rel=noopener>Agregar a la variable de entorno <code>R_LIBS</code> el directorio donde está la biblioteca</a>:<pre tabindex=0><code>export R_LIBS=$R_LIBS:/path/to/my/lib
</code></pre></li><li>Configurar <code>.Rprofile</code> para agregar el directorio.</li></ul><h2 id=redimensionar-gráficas-divididas><a href=#redimensionar-gr%c3%a1ficas-divididas alt>redimensionar gráficas divididas</a> <a href=# alt="Regresar al inicio">↑</a></h2><p><a href=https://stackoverflow.com/questions/61601428/adjust-the-size-of-panels-plotted-through-ggplot-and-facet-grid target=_blank rel=noopener>Cambiar el tamaño de cada marco en un facet</a>.</p><h2 id=gestionar-tiempo-en-r><a href=#gestionar-tiempo-en-r alt>Gestionar tiempo en R</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>La gente suele usar <a href=https://lubridate.tidyverse.org/reference/lubridate-package.html target=_blank rel=noopener><code>lubridate</code></a>,
pero hay <a href=https://www.tidyverse.org/blog/2021/03/clock-0-1-0/ target=_blank rel=noopener>una alternativa que busca evitar errores en comportamiento por defecto<code>clock</code></a>.</p><ul><li><a href=https://www.sthda.com/english/articles/32-r-graphics-essentials/128-plot-time-series-data-using-ggplot target=_blank rel=noopener>graficar series de tiempo</a>
(<a href=https://r-graph-gallery.com/279-plotting-time-series-with-ggplot2.html target=_blank rel=noopener>más ejemplos</a>)</li></ul><h2 id=recursos-para-programar-eficientemente-en-r><a href=#recursos-para-programar-eficientemente-en-r alt>Recursos para programar eficientemente en R</a> <a href=# alt="Regresar al inicio">↑</a></h2><p><a href=https://www.burns-stat.com/pages/Tutor/R_inferno.pdf target=_blank rel=noopener>R Inferno</a>.</p><p><a href=https://csgillespie.github.io/efficientR/workflow.html target=_blank rel=noopener>Tutorial de programación eficiente en R</a></p><h2 id=recursos-que-no-he-leído-pero-suenan-interesantes><a href=#recursos-que-no-he-le%c3%addo-pero-suenan-interesantes alt>Recursos que no he leído pero suenan interesantes</a> <a href=# alt="Regresar al inicio">↑</a></h2><p><a href=https://stackoverflow.com/questions/1358003/tricks-to-manage-the-available-memory-in-an-r-session target=_blank rel=noopener>Trucos para gestionar la memoria en R</a>.</p><p><a href=https://stackoverflow.com/questions/5628759/r-sometimes-does-not-save-my-history target=_blank rel=noopener>A veces R no guarda mi historial</a>.</p><p><a href=https://rstudio-education.github.io/tidyverse-cookbook/visualize-data.html target=_blank rel=noopener><em>«The Tidyverse Cookbook»—Garrett Grolemund</em>: Visualize Data</a></p><p><a href=https://bookdown.org/ansellbr/WEHI_tidyR_course_book/making-beautiful-plots.html target=_blank rel=noopener><em>«Introduction to R - tidyverse»—Brendan R. E. Ansell</em>: Making beautiful plots</a></p></article><section id=list><h2>Recursos</h2><ul class=contents></ul></section></main></body></html>