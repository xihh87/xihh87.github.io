<!doctype html><html lang=es-mx><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Arreglo de discos en RAID con megacli</title><link rel=stylesheet media=screen href=https://joshua.haase.mx/css/theme.min.c631e12f4e2b4b8b5282c3d94590678b7a225e8caccee02c0d37dac1838d6a61.css integrity="sha256-xjHhL04rS4tSgsPZRZBni3oiXoyszuAsDTfawYONamE="><script src=https://hypothes.is/embed.js></script></head><body><main><article><h1>Arreglo de discos en RAID con <code>megacli</code></h1><nav id=TableOfContents><ul><li><a href=#reemplazar-un-disco-en-un-arreglo>Reemplazar un disco en un arreglo</a></li><li><a href=#manuales-para-reemplazar-discos>Manuales para reemplazar discos</a></li></ul></nav><h2 id=reemplazar-un-disco-en-un-arreglo><a href=#reemplazar-un-disco-en-un-arreglo alt><a href=http://randomventure.blogspot.com/2014/02/megacli.html target=_blank rel=noopener>Reemplazar un disco en un arreglo</a></a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Enable autorebuild:</p><pre><code>MegaCli -AdpAutoRbld -Enbl -a0
</code></pre><p>set the drive offline:</p><pre><code>MegaCli -PDOffline -PhysDrv [E:S] -aN
</code></pre><p>mark the drive as missing:</p><pre><code>MegaCli -PDMarkMissing -PhysDrv [E:S] -aN
</code></pre><p>prepare drive for removal:</p><pre><code>MegaCli -PDPrpRmv -PhysDrv [E:S] -aN
</code></pre><p>change/replace the drive
if you are using hot spares, the replaced drive should become new hot spare:</p><pre><code>MegaCli -PDHSP -Set -PhysDrv [E:S] -aN
</code></pre><p>if you are not using hot spares, you must re-add the new drive to your RAID virtual drive and start the rebuilding:</p><pre><code>MegaCli -PdReplaceMissing -PhysDrv [E:S] -ArrayN -rowN -aN
MegaCli -PDRbld -Start -PhysDrv [E:S] -aN
</code></pre><h2 id=manuales-para-reemplazar-discos><a href=#manuales-para-reemplazar-discos alt>Manuales para reemplazar discos</a> <a href=# alt="Regresar al inicio">↑</a></h2><p><a href=https://hari2ulinux.com/linux-basic-commands/rebuild-degraded-megaraid-disk/ target=_blank rel=noopener>Reconstruir arreglos degradados</a></p><p><a href=http://randomventure.blogspot.com/2014/02/megacli.html target=_blank rel=noopener>Referencia de opciones de <code>megacli</code></a></p><p><a href=https://forums.servethehome.com/index.php?threads/lsi-megacli-preboot-cli-storecli-megascu-megarec-sas2flash-and-megaoem-commands.457/ target=_blank rel=noopener>Un foro que contiene varios comandos de <code>megacli</code></a></p><p><a href=https://www.broadcom.com/support/knowledgebase/1211161499760/lsi-command-line-interface-cross-reference-megacli-vs-twcli-vs-s target=_blank rel=noopener>Guía de comparación entre megaraid y storcli de broadcom (requiere js)</a></p><p><a href=http://erikimh.com/megacli-cheatsheet/ target=_blank rel=noopener>Referencia de instrucciones para la herramienta <code>megacli</code></a></p><p><a href=https://ahelpme.com/software/megacli/megacli-restart-a-rebuild-with-a-disk-in-failed-state/ target=_blank rel=noopener>Reconstruir discos en estado fallido</a></p><p><a href=https://vdgsecurity.com/kb/megaraid-storage-manager-manual/ target=_blank rel=noopener>Extracto del manual de la aplicación gráfica de <code>megacli</code></a></p><p><a href=https://www.broadcom.com/support/knowledgebase/1211161502838/megaraid-controller-still-beeps-after-rebuild-completes-and-vd-i target=_blank rel=noopener>Apagar la alarma de un disco degradado</a>.</p><p><a href=https://wiki.mikejung.biz/LSI target=_blank rel=noopener>Instrucciones para algunos casos especificos</a></p><p><a href=https://community.cisco.com/t5/security-documents/megacli-common-commands-and-procedures/ta-p/3114544 target=_blank rel=noopener>Comandos y procedimientos comunes</a></p><p><a href=https://blog.frehi.be/2011/09/12/megacli-useful-commands/ target=_blank rel=noopener>Más comandos comunes</a></p><p><a href=https://raid.wiki.kernel.org/index.php/Hardware_Raid_Setup_using_MegaCli target=_blank rel=noopener>Instrucciones para linux</a>.</p><p><a href=https://wikitech.wikimedia.org/wiki/MegaCli#Manually_array_rebuild_with_an_used_disk target=_blank rel=noopener>Reconstruir con un disco usado</a></p><p><a href=https://www.thomas-krenn.com/en/wiki/StorCLI target=_blank rel=noopener>Referencia de comandos StorCli</a></p><p><a href=https://www.thomas-krenn.com/en/wiki/Thomas-Krenn_Ubuntu_Repository target=_blank rel=noopener>Proceso de instalación de StorCli</a></p></article></main></body></html>