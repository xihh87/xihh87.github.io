<!doctype html><html lang=es-mx><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Notas acerca de git</title><link rel=stylesheet media=screen href=https://joshua.haase.mx/css/theme.min.2ee1317322f9eb9b2ef0a618d19b20e38c11f5f9c310751400a45db225dd2626.css integrity="sha256-LuExcyL565su8KYY0Zsg44wR9fnDEHUUAKRdsiXdJiY="><script src=https://hypothes.is/embed.js></script></head><body><main><article><h1>Notas acerca de <code>git</code></h1><nav id=TableOfContents><ul><li><a href=#resolución-de-problemas-comunes>Resolución de problemas comunes</a><ul><li><a href=#unrelated-histories>Unrelated histories</a></li><li><a href=#overwrite-local-changes>Overwrite local changes</a></li><li><a href=#no-tracking-information>No tracking information</a></li></ul></li><li><a href=#usar-o-reciclar-un-directorio-de-git-existente>Usar o reciclar un directorio de git existente</a></li><li><a href=#configurar-fecha-en-formato-iso-para-las-bitácoras>Configurar fecha en formato ISO para las bitácoras</a></li><li><a href=#cómo-funcionan-los-objetos-en-git>Cómo funcionan los objetos en git</a></li><li><a href=#usar-vimdiff-como-mergetool>Usar <code>vimdiff</code> como mergetool</a></li><li><a href=#otros-recursos>Otros recursos</a></li></ul></nav><h2 id=resolución-de-problemas-comunes><a href=#resoluci%c3%b3n-de-problemas-comunes alt>Resolución de problemas comunes</a> <a href=# alt="Regresar al inicio">↑</a></h2><h3 id=unrelated-histories><a href=#unrelated-histories alt>Unrelated histories</a> <a href=# alt="Regresar al inicio">↑</a></h3><p>Ocurre porque los repositorios no provienen del mismo origen,
si se quiere juntar dos proyectos de distintos orígenes:</p><pre tabindex=0><code>git merge --allow-unrelated-histories
</code></pre><h3 id=overwrite-local-changes><a href=#overwrite-local-changes alt>Overwrite local changes</a> <a href=# alt="Regresar al inicio">↑</a></h3><p><code>git</code> hace lo posible por evitar perder tu trabajo,
por lo que si hiciste cambios en archivos que tendría que escribir
falla con un a advertencia similar a:</p><blockquote><p><code>fatal: You need to commit your changes or stash them before you can merge.</code></p></blockquote><blockquote><p><code>fatal: Your local changes to the following files would be overwritten by merge:</code></p></blockquote><p>Una forma sencilla de lidiar con eso es
lo equivalente a guardar el desorden en tu escritorio en un cajón
para dejar el escritorio libre para trabajar:</p><pre tabindex=0><code>git stash -k -u
</code></pre><ul><li><code>-k</code>: conserva los cambios que habías guardado en el índice.</li><li><code>-u</code>: guarda también los archivos que git no está gestionando.</li></ul><h3 id=no-tracking-information><a href=#no-tracking-information alt>No tracking information</a> <a href=# alt="Regresar al inicio">↑</a></h3><p>Si no se configuró un repositorio río arriba (upstream),
<code>git push</code> no te deja subir la información
porque no sabe dónde ponerla y,
<code>git pull</code> no te deja bajarla
porque no saben de dónde tomarla.</p><p><code>there is no tracking information for the current branch</code></p><p>Se puede configurar la rama para seguir a otra en un repositorio:</p><pre tabindex=0><code>$ git branch --track ${BRANCH} ${REMOTE:-origin}/${REMOTE_BRANCH}
</code></pre><p>O se puede especificar el origen o destino de la información:</p><pre tabindex=0><code>$ git push -u ${REMOTE} ${BRANCH}
$ git pull ${REMOTE} ${BRANCH}
</code></pre><h2 id=usar-o-reciclar-un-directorio-de-git-existente><a href=#usar-o-reciclar-un-directorio-de-git-existente alt>Usar o reciclar un directorio de git existente</a> <a href=# alt="Regresar al inicio">↑</a></h2><p><a href=https://stackoverflow.com/a/3987863/10467443 target=_blank rel=noopener>Se puede generar un <strong>archivo</strong> <code>.git</code> que contenga</a>:</p><pre tabindex=0><code>gitdir: /path/to/gitdir
</code></pre><h2 id=configurar-fecha-en-formato-iso-para-las-bitácoras><a href=#configurar-fecha-en-formato-iso-para-las-bit%c3%a1coras alt>Configurar fecha en formato ISO para las bitácoras</a> <a href=# alt="Regresar al inicio">↑</a></h2><pre tabindex=0><code>git config --global log.date iso
</code></pre><h2 id=cómo-funcionan-los-objetos-en-git><a href=#c%c3%b3mo-funcionan-los-objetos-en-git alt>Cómo funcionan los objetos en git</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Git guarda los objetos como <a href=https://codewords.recurse.com/issues/three/unpacking-git-packfiles target=_blank rel=noopener>packfiles</a>
y de allí sale <a href=https://twitter.com/ManishEarth/status/837203953926352896 target=_blank rel=noopener>el dicho</a>:</p><blockquote><p>Git commits appear to be diffs, but they&rsquo;re actually file copies, but they&rsquo;re actually ACTUALLY diffs.</p></blockquote><p>y la <a href=https://twitter.com/togakangaroo/status/1155181749187559424 target=_blank rel=noopener>explicación un poco más larga</a>:</p><blockquote><p>Halfway through 2019 I can tell you they&rsquo;re actually file copies
except sometimes they&rsquo;re optimized to diffs though treated by many plumbing commands as file copies
(which they often are except when they are not)
but treated by the porcelain documentation as diffs.
Capiche?</p></blockquote><h2 id=usar-vimdiff-como-mergetool><a href=#usar-vimdiff-como-mergetool alt>Usar <code>vimdiff</code> como mergetool</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Los comandos ya no son tan simples y ya no funcionan los comandos <code>dp</code> y <code>do</code>.</p><p>La idea es usar <code>diffget</code> sobre cada uno de los cambios con un sufijo único:</p><pre tabindex=0><code>:diffg BA
:diffg RE
:diffg LO
</code></pre><p>Que eligen respectivamente:</p><ul><li>BASE</li><li>REMOTE</li><li>LOCAL</li></ul><h2 id=otros-recursos><a href=#otros-recursos alt>Otros recursos</a> <a href=# alt="Regresar al inicio">↑</a></h2><ul><li><a href=https://railsware.com/blog/git-housekeeping-tutorial-clean-up-outdated-branches-in-local-and-remote-repositories/ target=_blank rel=noopener>Cómo hacer mantenimiento de git</a>.</li></ul></article></main></body></html>