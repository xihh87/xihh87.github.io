<!doctype html><html lang=es-mx><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Plataforma digital para enseñanza</title><link rel=stylesheet media=screen href=https://joshua.haase.mx/css/theme.min.2ee1317322f9eb9b2ef0a618d19b20e38c11f5f9c310751400a45db225dd2626.css integrity="sha256-LuExcyL565su8KYY0Zsg44wR9fnDEHUUAKRdsiXdJiY="></head><body><main><article><h1>Plataforma digital para enseñanza</h1><nav id=TableOfContents><ul><li><a href=#lightsail->LightSail ✗</a></li><li><a href=#ecs>ECS</a></li><li><a href=#lightsail-intento-2>Lightsail intento 2</a></li><li><a href=#cambiar-la-url-en-lo-que-ya-había-hecho>Cambiar la URL en lo que ya había hecho</a></li></ul></nav><ul><li><p>[✓] Instalar una aplicación en el servidor para gestionar el material.</p></li><li><p><input disabled type=checkbox> <a href=~/xihh/proyectos/taller-del-hacker-%c3%a9tico/mejoras-para-el-taller.md>Instalar editor colaborativo para actividades</a></p><p>Se puede <a href=https://api.gandi.net/docs/livedns/ target=_blank rel=noopener>configurar el DNS de Gandi.net desde una API</a>.</p></li></ul><p>Varias plataformas para educación en línea basadas en software libre.</p><ul><li><p><a href=https://moodle.org/ target=_blank rel=noopener>Moodle</a>
que tiene <a href=https://github.com/moodlehq/moodle-docker target=_blank rel=noopener>este orquestador de docker para lanzar el servicio</a></p></li><li><p><a href=https://github.com/chamilo target=_blank rel=noopener>Chamilo</a>
que tiene <a href=https://github.com/chamilo/docker-chamilo target=_blank rel=noopener>este orquestador para lanzar los servicios</a></p></li><li><p><a href=https://www.odoo.com/ target=_blank rel=noopener>Odoo</a>
que es un <a href=https://gist.github.com/byk0t/a9644fd2360a9662702568459df289fc target=_blank rel=noopener>sistema para gestionar tu empresa y tiene un módulo de e-learning</a></p><p><a href=https://hub.docker.com/_/odoo/ target=_blank rel=noopener>Imagen oficial de Odoo</a></p><p><a href=https://github.com/ingeint/dockercompose-odoo target=_blank rel=noopener>Ejemplo de <code>docker-compose</code> que ejecuta Odoo</a></p><p>Otro <a href=https://arshovon.com/blog/setup-odoo-with-docker-compose/ target=_blank rel=noopener>ejemplo de <code>docker-compose</code> que ejecuta Odoo</a></p><p>[Así se puede generar una instancia dehttps://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lightsail_instance</p></li><li><p>[✓] Migrar la imagen que uso y mis datos hacia un servidor web.</p><h2 id=lightsail-><a href=#lightsail- alt>LightSail ✗</a> <a href=# alt="Regresar al inicio">↑</a></h2><ul><li><p><a href=https://lightsail.aws.amazon.com/ls/webapp/home/instances target=_blank rel=noopener>Generé un lightsail de 3.5 dólares con ubuntu.</a></p></li><li><p>Instalé mi clave pública por defecto</p></li><li><p>Instalé docker <code>apt-get update && apt-get install docker.io</code></p></li><li><p>Agregué mi usuario al grupo docker <code>sudo gpasswd -a ubuntu docker</code></p></li><li><p>Copié los datos utilizando este <a href=https://www.guidodiepen.nl/2016/05/transfer-docker-data-volume-to-another-host/ target=_blank rel=noopener>comando para clonar datos de un volumen de docker a un sitio remoto</a>:</p><pre tabindex=0><code>$ docker run --rm -v prueba-odoo_db-data:/from alpine ash -c &#34;cd /from ; tar -cf - . &#34; | ssh odoo &#39;docker run --rm -i -v prueba-odoo_db-data:/to alpine ash -c &#34;cd /to ; tar -xpvf - &#34; &#39;
$ docker run --rm -v prueba-odoo_web-data:/from alpine ash -c &#34;cd /from ; tar -cf - . &#34; | ssh odoo &#39;docker run --rm -i -v prueba-odoo_web-data:/to alpine ash -c &#34;cd /to ; tar -xpvf - &#34; &#39;
</code></pre></li><li><p>Intentar usar mi docker-compose para levantar los servicios dentro de la instancia lightsail pero los recursos fueron insuficientes.</p></li></ul><h2 id=ecs><a href=#ecs alt>ECS</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Configurar una política para acceder a docker-compose en ECS</p><ul><li><p>[✓] Configurar <a href=https://docs.docker.com/cloud/ecs-integration/ target=_blank rel=noopener>los permisos apropiados para usar ECS desde docker-compose</a></p></li><li><p>[✓] Generar un usuario con el rol apropiado para usar ECS.</p></li><li><p>[✓] Generar el contexto de docker para generar los sistemas en EC2.</p><p>No funcionó la versión que tenía,
<a href=https://stackoverflow.com/questions/67236401/docker-context-create-ecs-myecs-requires-exactly-one-argument target=_blank rel=noopener>por lo que instalé docker-compose-cli</a>
<code>paru -S docker-compose-cli</code></p></li><li><p>[✗] Generar los sistemas para instalar los servicios.</p><p>Usar el compose-cli para levantar el entorno en el ECS</p><pre tabindex=0><code>$ docker-compose-cli context use doct
$ docker-compose-cli compose up
published port can&#39;t be set to a distinct value than container port: incompatible attribute
$ docker-compose-cli compose up
AccessDeniedException:
        status code: 403, request id: 4fdb9b48-2513-47c1-9045-583a9b50fa00
</code></pre></li></ul><h2 id=lightsail-intento-2><a href=#lightsail-intento-2 alt>Lightsail intento 2</a> <a href=# alt="Regresar al inicio">↑</a></h2><p>Generé una máquina lightsail de USD $10.</p><p>Utilicé el docker-compose.yml del repo prueba-odoo para generar el sistema</p><pre tabindex=0><code>cd $(repo odoo)
docker context use odoo
docker-compose up -d
ssh -L 8080:localhost:8069 odoo &amp;
</code></pre></li><li><p><input disabled type=checkbox> Volver a generar el curso.</p></li></ul><p>Fue necesario entrar al modo desarrollador para cambiar la URL base.</p><h2 id=cambiar-la-url-en-lo-que-ya-había-hecho><a href=#cambiar-la-url-en-lo-que-ya-hab%c3%ada-hecho alt>Cambiar la URL en lo que ya había hecho</a> <a href=# alt="Regresar al inicio">↑</a></h2><ul><li><p>[✓] Copiar el contenido de docker al servidor.</p><pre><code>```
$ docker context use default
$ docker run --rm -v prueba-odoo_db-data:/from alpine ash -c &quot;cd /from ; tar -cf - . &quot; | ssh odoo 'docker run --rm -i -v prueba-odoo_db-cp:/to alpine ash -c &quot;cd /to ; tar -xpvf - &quot; '
$ docker run --rm -v prueba-odoo_web-data:/from alpine ash -c &quot;cd /from ; tar -cf - . &quot; | ssh odoo 'docker run --rm -i -v prueba-odoo_web-cp:/to alpine ash -c &quot;cd /to ; tar -xpvf - &quot; '
```

docker context use odoo
cr odoo
git checkout odoo-cp-test
docker-compose up -d
</code></pre></li><li><p>[✓] Limpiar el caché del navegador.</p></li><li><p>[✓] Cambiar la URL en aplicaciones.</p></li><li><p>[✓] Cambiar la URL en el modo desarrollador.</p></li></ul></article></main></body></html>