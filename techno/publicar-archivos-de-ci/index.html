<!doctype html><html lang=es-mx><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Actualizar mis archivos publicados automáticamente</title><link rel=stylesheet media=screen href=https://joshua.haase.mx/css/theme.min.2ee1317322f9eb9b2ef0a618d19b20e38c11f5f9c310751400a45db225dd2626.css integrity="sha256-LuExcyL565su8KYY0Zsg44wR9fnDEHUUAKRdsiXdJiY="><script src=https://hypothes.is/embed.js></script></head><body><main><article><h1>Actualizar mis archivos publicados automáticamente</h1><nav id=TableOfContents></nav><p>Tengo varios proyectos que generan archivos con integración continua
y actualmente dejan sus archivos en <code>gitlab.com</code>.</p><p>Quiero vincular varios de ellos desde un sitio web
y que se actualicen conforme van cambiando los archivos generados.</p><p>Para implementar esto:</p><ul><li><p>☑ Generar un par de claves criptográficas para SSH.</p></li><li><p>☑ Configurar un <a href=https://gitlab.com/gcd-ibero/gestion-de-infraestructura/-/blob/main/playbooks/jh.yml#L7 target=_blank rel=noopener>usuario <code>ssh</code> en un servidor</a>.
que pueda escribir en un directorio,
y permita el acceso con clave pública.</p></li><li><p>☑ <a href=https://docs.gitlab.com/ee/ci/ssh_keys/ target=_blank rel=noopener>Guardar la clave privada como variable en GitLab</a>
(<a href=https://gitlab.com/xihh87/seguridad-informatica/-/settings/ci_cd target=_blank rel=noopener>prueba</a>).</p></li><li><p>☑ Generar un script que configure la llave durante la construcción del escenario.</p></li><li><p>☑ Generar un <a href=https://gitlab.com/xihh87/seguridad-informatica/-/blob/2-upload/.gitlab-ci.yml#L12 target=_blank rel=noopener>script que publique los documentos indicados en el servicio</a>.</p><p>Dado que no confiamos en las entradas de datos de los usuarios que suben código a los repositorios,
quedan 2 alternativas:</p><ul><li><p>GitLab activa el proceso
llamando un script que construye el documento desde mi servidor
y los agrega en el directorio correcto.</p></li><li><p>GitLab construye los documentos
y llama a un script que descargaría
la última versión de los artefactos generados por GitLab
y los agrega en el directorio correcto.</p></li></ul><p>Desde el directorio de trabajo (<code>cr /seg</code>):</p><pre tabindex=0><code>mk upload
</code></pre></li></ul></article></main></body></html>